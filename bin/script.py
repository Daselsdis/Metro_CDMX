from typing import Dict, List, Tuple

import networkx as nx
import sys

class MetroSystem:
    def __init__(self):
        self.graph = nx.MultiGraph()
        self.distancias={}

    def add_station(self, station_id: int, name: str):
        """Add a station to the metro system"""
        self.graph.add_node(station_id, name=name)

    def add_connection(self, station1: int, station2: int, line: str, time: float):
        """Add a connection between two stations on a specific line"""
        self.graph.add_edge(
            station1,
            station2,
            key=line,
            line=line,
            time=time,
            weight=time,
        )

    def find_route(
        self, start_station: int, end_station: int
    ) -> Tuple[List[int], float, List[str]]:
        # Tuple (route_stations, total_time, route_lines)


        return self._custom_astar(start_station, end_station)

    def _custom_astar(self, start: int, end: int) -> Tuple[List[int], float, List[str]]:
        import heapq

        # Priority queue: (estimated_total_cost, current_cost, node, path, lines, previous_line)
        queue = []
        heapq.heappush(queue, (0, 0, start, [start], [], None))

        best_costs = {}

        while queue:
            est_total_cost, current_cost, node, path, lines, prev_line = heapq.heappop(
                queue
            )

            if node == end:
                return path, current_cost, lines

            for neighbor in self.graph.neighbors(node):
                # Get all edges between current node and neighbor
                edges_data = self.graph.get_edge_data(node, neighbor)

                if edges_data:
                    for edge_key, edge_data in edges_data.items():
                        # Calculate weight for this edge considering transfer penalty
                        if prev_line is None:
                            edge_weight = edge_data["time"]
                        else:
                            current_line = edge_data["line"]
                            if current_line != prev_line:
                                edge_weight = (
                                    edge_data["time"] + 1.5
                                )  
                            else:
                                edge_weight = edge_data["time"]

                        new_cost = current_cost + edge_weight
                        new_lines = lines + [edge_data["line"]]

                        state_key = (neighbor, edge_data["line"])

                        if (
                            state_key not in best_costs
                            or new_cost < best_costs[state_key]
                        ):
                            best_costs[state_key] = new_cost

                            heuristic = self.distancias.get((neighbor,end),0)

                            new_path = path + [neighbor]
                            total_est_cost = new_cost + heuristic

                            heapq.heappush(
                                queue,
                                (
                                    total_est_cost,
                                    new_cost,
                                    neighbor,
                                    new_path,
                                    new_lines,
                                    edge_data["line"],
                                ),
                            )

        raise ValueError(f"No path found from {start} to {end}")

    def get_route_details(
        self, route: List[int], lines: List[str]
    ) -> Tuple[List[Dict], float]:
        details = []
        total_time = 0

        for i in range(len(route) - 1):
            current_station = route[i]
            next_station = route[i + 1]
            current_line = lines[i]

            edge_data = self.graph.get_edge_data(current_station, next_station)

            if not edge_data:
                raise ValueError(
                    f"No connection found between {current_station} and {next_station}"
                )

            segment_data = None
            for _edge_key, data in edge_data.items():
                if data["line"] == current_line:
                    segment_data = data
                    break

            if segment_data is None:
                raise ValueError(
                    f"Line {current_line} not found between {current_station} and {next_station}"
                )

            is_transfer = i > 0 and lines[i] != lines[i - 1]
            transfer_penalty = 1.5 if is_transfer else 0.0
            segment_total_time = segment_data["time"] + transfer_penalty
            total_time += segment_total_time

            segment_info = {
                "from": self.graph.nodes[current_station]["name"],
                "to": self.graph.nodes[next_station]["name"],
                "from_id": current_station,
                "to_id": next_station,
                "line": current_line,
                "travel_time": segment_data["time"],
                "transfer_penalty": transfer_penalty,
                "total_time": segment_total_time,
                "is_transfer": is_transfer,
            }
            details.append(segment_info)
        return (details, total_time)


def create_sample_metro_system() -> MetroSystem:
    """Create a sample metro system for testing"""
    metro = MetroSystem()

    stations = {
        0: "Balderas",
        1: "Cauhtemos",
        2: "Insurgentes",
        3: "Sevilla",
        4: "Chapultepec",
        5: "Juancatlan",
        6: "Tacubaya",
        7: "Observatorio",
        8: "Juarez",
        9: "NinosHeroes",
        10: "HospitalGeneral",
        11: "CentroMedico",
        12: "Etiopia",
        13: "Eugenia",
        14: "DivisionDelNorte",
        15: "Zapata",
        16: "Coyoacan",
        17: "Viveros",
        18: "MADeQuevedo",
        19: "Copilco",
        20: "Universidad",
        21: "Polanco",
        22: "Auditorio",
        23: "Constituyentes",
        24: "SanPedroDeLosPinos",
        25: "SanAntonio",
        26: "Mixcoac",
        27: "BarrancaDelMuerto",
        28: "LazaroCardenas",
        29: "Chilipancingo",
        30: "Patriotismo",
        31: "EjeCentral",
        32: "ParqueDeLosVenados",
        33: "Hospital20Noviembre",
        34: "InsurgentesSur",
    }

    metro.distancias ={
        (0, 1): 606,
        (0, 2): 1530,
        (0, 3): 2328,
        (0, 4): 2364,
        (0, 5): 3827,
        (0, 6): 4808,
        (0, 7): 6256,
        (0, 8): 639,
        (0, 9): 912,
        (0, 10): 1629,
        (0, 11): 2421,
        (0, 12): 3633,
        (0, 13): 4759,
        (0, 14): 5376,
        (0, 15): 6505,
        (0, 16): 7688,
        (0, 17): 8674,
        (0, 18): 9625,
        (0, 19): 10593,
        (0, 20): 11753,
        (0, 21): 4433,
        (0, 22): 4483,
        (0, 23): 4737,
        (0, 24): 5577,
        (0, 25): 6151,
        (0, 26): 7010,
        (0, 27): 7488,
        (0, 28): 2327,
        (0, 29): 3154,
        (0, 30): 3917,
        (0, 31): 7354,
        (0, 32): 6377,
        (0, 33): 6591,
        (0, 34): 6752,
        (1, 0): 606,
        (1, 2): 923,
        (1, 3): 1722,
        (1, 4): 1757,
        (1, 5): 3225,
        (1, 6): 4228,
        (1, 7): 5667,
        (1, 8): 1087,
        (1, 9): 831,
        (1, 10): 1370,
        (1, 11): 2137,
        (1, 12): 3372,
        (1, 13): 4501,
        (1, 14): 5110,
        (1, 15): 6197,
        (1, 16): 7354,
        (1, 17): 8322,
        (1, 18): 9260,
        (1, 19): 10267,
        (1, 20): 11453,
        (1, 21): 3901,
        (1, 22): 3901,
        (1, 23): 4132,
        (1, 24): 5049,
        (1, 25): 5648,
        (1, 26): 6534,
        (1, 27): 7258,
        (1, 28): 2330,
        (1, 29): 2656,
        (1, 30): 3350,
        (1, 31): 7170,
        (1, 32): 6125,
        (1, 33): 6230,
        (1, 34): 6333,
        (2, 0): 1530,
        (2, 1): 923,
        (2, 3): 801,
        (2, 4): 834,
        (2, 5): 2318,
        (2, 6): 3366,
        (2, 7): 4781,
        (2, 8): 1939,
        (2, 9): 1380,
        (2, 10): 1462,
        (2, 11): 2012,
        (2, 12): 3174,
        (2, 13): 4256,
        (2, 14): 4835,
        (2, 15): 5829,
        (2, 16): 6928,
        (2, 17): 7856,
        (2, 18): 8765,
        (2, 19): 9832,
        (2, 20): 11055,
        (2, 21): 3137,
        (2, 22): 3029,
        (2, 23): 3212,
        (2, 24): 4291,
        (2, 25): 4936,
        (2, 26): 5865,
        (2, 27): 7006,
        (2, 28): 2628,
        (2, 29): 2026,
        (2, 30): 2528,
        (2, 31): 6992,
        (2, 32): 5852,
        (2, 33): 5771,
        (2, 34): 5767,
        (3, 0): 2328,
        (3, 1): 1722,
        (3, 2): 801,
        (3, 4): 122,
        (3, 5): 1582,
        (3, 6): 2703,
        (3, 7): 4064,
        (3, 8): 2695,
        (3, 9): 2115,
        (3, 10): 1994,
        (3, 11): 2309,
        (3, 12): 3301,
        (3, 13): 4288,
        (3, 14): 4820,
        (3, 15): 5702,
        (3, 16): 6727,
        (3, 17): 7604,
        (3, 18): 8476,
        (3, 19): 9594,
        (3, 20): 10847,
        (3, 21): 2497,
        (3, 22): 2267,
        (3, 23): 2434,
        (3, 24): 3762,
        (3, 25): 4453,
        (3, 26): 5420,
        (3, 27): 6969,
        (3, 28): 3158,
        (3, 29): 1798,
        (3, 30): 1959,
        (3, 31): 7023,
        (3, 32): 5815,
        (3, 33): 5555,
        (3, 34): 5439,
        (4, 0): 2364,
        (4, 1): 1757,
        (4, 2): 834,
        (4, 3): 122,
        (4, 5): 1507,
        (4, 6): 2611,
        (4, 7): 3987,
        (4, 8): 2754,
        (4, 9): 2103,
        (4, 10): 1939,
        (4, 11): 2221,
        (4, 12): 3192,
        (4, 13): 4172,
        (4, 14): 4702,
        (4, 15): 5580,
        (4, 16): 6604,
        (4, 17): 7482,
        (4, 18): 8355,
        (4, 19): 9472,
        (4, 20): 10724,
        (4, 21): 2563,
        (4, 22): 2291,
        (4, 23): 2380,
        (4, 24): 3652,
        (4, 25): 4340,
        (4, 26): 5304,
        (4, 27): 6850,
        (4, 28): 3095,
        (4, 29): 1677,
        (4, 30): 1850,
        (4, 31): 6906,
        (4, 32): 5696,
        (4, 33): 5432,
        (4, 34): 5318,
        (5, 0): 3827,
        (5, 1): 3225,
        (5, 2): 2318,
        (5, 3): 1582,
        (5, 4): 1507,
        (5, 6): 1179,
        (5, 7): 2482,
        (5, 8): 4255,
        (5, 9): 3394,
        (5, 10): 2979,
        (5, 11): 2863,
        (5, 12): 3337,
        (5, 13): 4006,
        (5, 14): 4396,
        (5, 15): 4999,
        (5, 16): 5841,
        (5, 17): 6603,
        (5, 18): 7395,
        (5, 19): 8582,
        (5, 20): 9868,
        (5, 21): 2479,
        (5, 22): 1731,
        (5, 23): 950,
        (5, 24): 2415,
        (5, 25): 3152,
        (5, 26): 4147,
        (5, 27): 6384,
        (5, 28): 3955,
        (5, 29): 1622,
        (5, 30): 820,
        (5, 31): 6566,
        (5, 32): 5281,
        (5, 33): 4689,
        (5, 34): 4371,
        (6, 0): 4808,
        (6, 1): 4228,
        (6, 2): 3366,
        (6, 3): 2703,
        (6, 4): 2611,
        (6, 5): 1179,
        (6, 7): 1472,
        (6, 8): 5296,
        (6, 9): 4235,
        (6, 10): 3681,
        (6, 11): 3323,
        (6, 12): 3365,
        (6, 13): 3705,
        (6, 14): 3947,
        (6, 15): 4295,
        (6, 16): 4970,
        (6, 17): 5639,
        (6, 18): 6371,
        (6, 19): 7587,
        (6, 20): 8883,
        (6, 21): 3381,
        (6, 22): 2506,
        (6, 23): 1034,
        (6, 24): 1329,
        (6, 25): 2067,
        (6, 26): 3054,
        (6, 27): 5715,
        (6, 28): 4444,
        (6, 29): 1969,
        (6, 30): 926,
        (6, 31): 5985,
        (6, 32): 4693,
        (6, 33): 3873,
        (6, 34): 3414,
        (7, 0): 6256,
        (7, 1): 5667,
        (7, 2): 4781,
        (7, 3): 4064,
        (7, 4): 3987,
        (7, 5): 2482,
        (7, 6): 1472,
        (7, 8): 6720,
        (7, 9): 5706,
        (7, 10): 5151,
        (7, 11): 4757,
        (7, 12): 4625,
        (7, 13): 4712,
        (7, 14): 4795,
        (7, 15): 4795,
        (7, 16): 5139,
        (7, 17): 5571,
        (7, 18): 6122,
        (7, 19): 7377,
        (7, 20): 8668,
        (7, 21): 4031,
        (7, 22): 3136,
        (7, 23): 1773,
        (7, 24): 1665,
        (7, 25): 2092,
        (7, 26): 2831,
        (7, 27): 6180,
        (7, 28): 5868,
        (7, 29): 3417,
        (7, 30): 2397,
        (7, 31): 6562,
        (7, 32): 5325,
        (7, 33): 4230,
        (7, 34): 3540,
        (8, 0): 639,
        (8, 1): 1087,
        (8, 2): 1939,
        (8, 3): 2695,
        (8, 4): 2754,
        (8, 5): 4255,
        (8, 6): 5296,
        (8, 7): 6720,
        (8, 9): 1551,
        (8, 10): 2268,
        (8, 11): 3060,
        (8, 12): 4272,
        (8, 13): 5398,
        (8, 14): 6016,
        (8, 15): 7145,
        (8, 16): 8326,
        (8, 17): 9311,
        (8, 18): 10260,
        (8, 19): 11233,
        (8, 20): 12393,
        (8, 21): 4530,
        (8, 22): 4703,
        (8, 23): 5130,
        (8, 24): 6136,
        (8, 25): 6731,
        (8, 26): 7608,
        (8, 27): 8123,
        (8, 28): 2923,
        (8, 29): 3735,
        (8, 30): 4431,
        (8, 31): 7982,
        (8, 32): 7015,
        (8, 33): 7226,
        (8, 34): 7374,
        (9, 0): 912,
        (9, 1): 831,
        (9, 2): 1380,
        (9, 3): 2115,
        (9, 4): 2103,
        (9, 5): 3394,
        (9, 6): 4235,
        (9, 7): 5706,
        (9, 8): 1551,
        (9, 10): 736,
        (9, 11): 1520,
        (9, 12): 2721,
        (9, 13): 3847,
        (9, 14): 4464,
        (9, 15): 5597,
        (9, 16): 6785,
        (9, 17): 7776,
        (9, 18): 8731,
        (9, 19): 9687,
        (9, 20): 10842,
        (9, 21): 4517,
        (9, 22): 4382,
        (9, 23): 4340,
        (9, 24): 4855,
        (9, 25): 5381,
        (9, 26): 6200,
        (9, 27): 6576,
        (9, 28): 1504,
        (9, 29): 2417,
        (9, 30): 3314,
        (9, 31): 6451,
        (9, 32): 5465,
        (9, 33): 5698,
        (9, 34): 5892,
        (10, 0): 1629,
        (10, 1): 1370,
        (10, 2): 1462,
        (10, 3): 1994,
        (10, 4): 1939,
        (10, 5): 2979,
        (10, 6): 3681,
        (10, 7): 5151,
        (10, 8): 2268,
        (10, 9): 736,
        (10, 11): 792,
        (10, 12): 2017,
        (10, 13): 3147,
        (10, 14): 3761,
        (10, 15): 4877,
        (10, 16): 6058,
        (10, 17): 7045,
        (10, 18): 7998,
        (10, 19): 8964,
        (10, 20): 10129,
        (10, 21): 4490,
        (10, 22): 4208,
        (10, 23): 3926,
        (10, 24): 4186,
        (10, 25): 4682,
        (10, 26): 5480,
        (10, 27): 5896,
        (10, 28): 1176,
        (10, 29): 1771,
        (10, 30): 2756,
        (10, 31): 5800,
        (10, 32): 4771,
        (10, 33): 4964,
        (10, 34): 5157,
        (11, 0): 2421,
        (11, 1): 2137,
        (11, 2): 2012,
        (11, 3): 2309,
        (11, 4): 2221,
        (11, 5): 2863,
        (11, 6): 3323,
        (11, 7): 4757,
        (11, 8): 3060,
        (11, 9): 1520,
        (11, 10): 792,
        (11, 12): 1235,
        (11, 13): 2364,
        (11, 14): 2975,
        (11, 15): 4085,
        (11, 16): 5266,
        (11, 17): 6255,
        (11, 18): 7211,
        (11, 19): 8172,
        (11, 20): 9337,
        (11, 21): 4759,
        (11, 22): 4333,
        (11, 23): 3767,
        (11, 24): 3610,
        (11, 25): 4034,
        (11, 26): 4777,
        (11, 27): 5121,
        (11, 28): 1122,
        (11, 29): 1356,
        (11, 30): 2432,
        (11, 31): 5047,
        (11, 32): 3988,
        (11, 33): 4178,
        (11, 34): 4401,
        (12, 0): 3633,
        (12, 1): 3372,
        (12, 2): 3174,
        (12, 3): 3301,
        (12, 4): 3192,
        (12, 5): 3337,
        (12, 6): 3365,
        (12, 7): 4625,
        (12, 8): 4272,
        (12, 9): 2721,
        (12, 10): 2017,
        (12, 11): 1235,
        (12, 13): 1130,
        (12, 14): 1744,
        (12, 15): 2883,
        (12, 16): 4085,
        (12, 17): 5090,
        (12, 18): 6057,
        (12, 19): 6974,
        (12, 20): 8121,
        (12, 21): 5583,
        (12, 22): 5007,
        (12, 23): 4093,
        (12, 24): 3170,
        (12, 25): 3385,
        (12, 26): 3944,
        (12, 27): 3886,
        (12, 28): 1731,
        (12, 29): 1736,
        (12, 30): 2656,
        (12, 31): 3826,
        (12, 32): 2754,
        (12, 33): 3050,
        (12, 34): 3404,
        (13, 0): 4759,
        (13, 1): 4501,
        (13, 2): 4256,
        (13, 3): 4288,
        (13, 4): 4172,
        (13, 5): 4006,
        (13, 6): 3705,
        (13, 7): 4712,
        (13, 8): 5398,
        (13, 9): 3847,
        (13, 10): 3147,
        (13, 11): 2364,
        (13, 12): 1130,
        (13, 14): 618,
        (13, 15): 1794,
        (13, 16): 3011,
        (13, 17): 4028,
        (13, 18): 5003,
        (13, 19): 5871,
        (13, 20): 7000,
        (13, 21): 6404,
        (13, 22): 5733,
        (13, 23): 4602,
        (13, 24): 3084,
        (13, 25): 3041,
        (13, 26): 3331,
        (13, 27): 2762,
        (13, 28): 2725,
        (13, 29): 2558,
        (13, 30): 3222,
        (13, 31): 2743,
        (13, 32): 1624,
        (13, 33): 2075,
        (13, 34): 2607,
        (14, 0): 5376,
        (14, 1): 5110,
        (14, 2): 4835,
        (14, 3): 4820,
        (14, 4): 4702,
        (14, 5): 4396,
        (14, 6): 3947,
        (14, 7): 4795,
        (14, 8): 6016,
        (14, 9): 4464,
        (14, 10): 3761,
        (14, 11): 2975,
        (14, 12): 1744,
        (14, 13): 618,
        (14, 15): 1197,
        (14, 16): 2415,
        (14, 17): 3436,
        (14, 18): 4412,
        (14, 19): 5257,
        (14, 20): 6382,
        (14, 21): 6840,
        (14, 22): 6126,
        (14, 23): 4904,
        (14, 24): 3132,
        (14, 25): 2941,
        (14, 26): 3045,
        (14, 27): 2170,
        (14, 28): 3327,
        (14, 29): 3051,
        (14, 30): 3587,
        (14, 31): 2210,
        (14, 32): 1019,
        (14, 33): 1571,
        (14, 34): 2223,
        (15, 0): 6505,
        (15, 1): 6197,
        (15, 2): 5829,
        (15, 3): 5702,
        (15, 4): 5580,
        (15, 5): 4999,
        (15, 6): 4295,
        (15, 7): 4795,
        (15, 8): 7145,
        (15, 9): 5597,
        (15, 10): 4877,
        (15, 11): 4085,
        (15, 12): 2883,
        (15, 13): 1794,
        (15, 14): 1197,
        (15, 16): 1219,
        (15, 17): 2239,
        (15, 18): 3214,
        (15, 19): 4091,
        (15, 20): 5256,
        (15, 21): 7479,
        (15, 22): 6689,
        (15, 23): 5319,
        (15, 24): 3184,
        (15, 25): 2728,
        (15, 26): 2433,
        (15, 27): 1421,
        (15, 28): 4518,
        (15, 29): 3903,
        (15, 30): 4181,
        (15, 31): 1768,
        (15, 32): 659,
        (15, 33): 661,
        (15, 34): 1498,
        (16, 0): 7688,
        (16, 1): 7354,
        (16, 2): 6928,
        (16, 3): 6727,
        (16, 4): 6604,
        (16, 5): 5841,
        (16, 6): 4970,
        (16, 7): 5139,
        (16, 8): 8326,
        (16, 9): 6785,
        (16, 10): 6058,
        (16, 11): 5266,
        (16, 12): 4085,
        (16, 13): 3011,
        (16, 14): 2415,
        (16, 15): 1219,
        (16, 17): 1020,
        (16, 18): 1996,
        (16, 19): 2913,
        (16, 20): 4127,
        (16, 21): 8295,
        (16, 22): 7455,
        (16, 23): 6002,
        (16, 24): 3705,
        (16, 25): 3071,
        (16, 26): 2383,
        (16, 27): 1446,
        (16, 28): 5737,
        (16, 29): 4945,
        (16, 30): 5045,
        (16, 31): 2025,
        (16, 32): 1645,
        (16, 33): 1173,
        (16, 34): 1606,
        (17, 0): 8674,
        (17, 1): 8322,
        (17, 2): 7856,
        (17, 3): 7604,
        (17, 4): 7482,
        (17, 5): 6603,
        (17, 6): 5639,
        (17, 7): 5571,
        (17, 8): 9311,
        (17, 9): 7776,
        (17, 10): 7045,
        (17, 11): 6255,
        (17, 12): 5090,
        (17, 13): 4028,
        (17, 14): 3436,
        (17, 15): 2239,
        (17, 16): 1020,
        (17, 18): 975,
        (17, 19): 1991,
        (17, 20): 3265,
        (17, 21): 9011,
        (17, 22): 8145,
        (17, 23): 6654,
        (17, 24): 4322,
        (17, 25): 3617,
        (17, 26): 2740,
        (17, 27): 2139,
        (17, 28): 6754,
        (17, 29): 5848,
        (17, 30): 5835,
        (17, 31): 2719,
        (17, 32): 2637,
        (17, 33): 2092,
        (17, 34): 2234,
        (18, 0): 9625,
        (18, 1): 9260,
        (18, 2): 8765,
        (18, 3): 8476,
        (18, 4): 8355,
        (18, 5): 7395,
        (18, 6): 6371,
        (18, 7): 6122,
        (18, 8): 10260,
        (18, 9): 8731,
        (18, 10): 7998,
        (18, 11): 7211,
        (18, 12): 6057,
        (18, 13): 5003,
        (18, 14): 4412,
        (18, 15): 3214,
        (18, 16): 1996,
        (18, 17): 975,
        (18, 19): 1255,
        (18, 20): 2546,
        (18, 21): 9752,
        (18, 22): 8869,
        (18, 23): 7361,
        (18, 24): 5042,
        (18, 25): 4309,
        (18, 26): 3354,
        (18, 27): 2980,
        (18, 28): 7728,
        (18, 29): 6746,
        (18, 30): 6654,
        (18, 31): 3530,
        (18, 32): 3599,
        (18, 33): 3034,
        (18, 34): 3044,
        (19, 0): 10593,
        (19, 1): 10267,
        (19, 2): 9832,
        (19, 3): 9594,
        (19, 4): 9472,
        (19, 5): 8582,
        (19, 6): 7587,
        (19, 7): 7377,
        (19, 8): 11233,
        (19, 9): 9687,
        (19, 10): 8964,
        (19, 11): 8172,
        (19, 12): 6974,
        (19, 13): 5871,
        (19, 14): 5257,
        (19, 15): 4091,
        (19, 16): 2913,
        (19, 17): 1991,
        (19, 18): 1255,
        (19, 20): 1298,
        (19, 21): 10968,
        (19, 22): 10091,
        (19, 23): 8588,
        (19, 24): 6261,
        (19, 25): 5535,
        (19, 26): 4596,
        (19, 27): 3439,
        (19, 28): 8577,
        (19, 29): 7832,
        (19, 30): 7821,
        (19, 31): 3884,
        (19, 32): 4328,
        (19, 33): 4060,
        (19, 34): 4211,
        (20, 0): 11753,
        (20, 1): 11453,
        (20, 2): 11055,
        (20, 3): 10847,
        (20, 4): 10724,
        (20, 5): 9868,
        (20, 6): 8883,
        (20, 7): 8668,
        (20, 8): 12393,
        (20, 9): 10842,
        (20, 10): 10129,
        (20, 11): 9337,
        (20, 12): 8121,
        (20, 13): 7000,
        (20, 14): 6382,
        (20, 15): 5256,
        (20, 16): 4127,
        (20, 17): 3265,
        (20, 18): 2546,
        (20, 19): 1298,
        (20, 21): 12263,
        (20, 22): 11388,
        (20, 23): 9886,
        (20, 24): 7558,
        (20, 25): 6834,
        (20, 26): 5894,
        (20, 27): 4396,
        (20, 28): 9666,
        (20, 29): 9071,
        (20, 30): 9100,
        (20, 31): 4742,
        (20, 32): 5406,
        (20, 33): 5294,
        (20, 34): 5496,
        (21, 0): 4433,
        (21, 1): 3901,
        (21, 2): 3137,
        (21, 3): 2497,
        (21, 4): 2563,
        (21, 5): 2479,
        (21, 6): 3381,
        (21, 7): 4031,
        (21, 8): 4530,
        (21, 9): 4517,
        (21, 10): 4490,
        (21, 11): 4759,
        (21, 12): 5583,
        (21, 13): 6404,
        (21, 14): 6840,
        (21, 15): 7479,
        (21, 16): 8295,
        (21, 17): 9011,
        (21, 18): 9752,
        (21, 19): 10968,
        (21, 20): 12263,
        (21, 22): 905,
        (21, 23): 2413,
        (21, 24): 4710,
        (21, 25): 5445,
        (21, 26): 6422,
        (21, 27): 8862,
        (21, 28): 5655,
        (21, 29): 3869,
        (21, 30): 3299,
        (21, 31): 9030,
        (21, 32): 7752,
        (21, 33): 7155,
        (21, 34): 6779,
        (22, 0): 4483,
        (22, 1): 3901,
        (22, 2): 3029,
        (22, 3): 2267,
        (22, 4): 2291,
        (22, 5): 1731,
        (22, 6): 2506,
        (22, 7): 3136,
        (22, 8): 4703,
        (22, 9): 4382,
        (22, 10): 4208,
        (22, 11): 4333,
        (22, 12): 5007,
        (22, 13): 5733,
        (22, 14): 6126,
        (22, 15): 6689,
        (22, 16): 7455,
        (22, 17): 8145,
        (22, 18): 8869,
        (22, 19): 10091,
        (22, 20): 11388,
        (22, 21): 905,
        (22, 23): 1514,
        (22, 24): 3830,
        (22, 25): 4559,
        (22, 26): 5530,
        (22, 27): 8088,
        (22, 28): 5329,
        (22, 29): 3270,
        (22, 30): 2542,
        (22, 31): 8289,
        (22, 32): 7000,
        (22, 33): 6331,
        (22, 34): 5918,
        (23, 0): 4737,
        (23, 1): 4132,
        (23, 2): 3212,
        (23, 3): 2434,
        (23, 4): 2380,
        (23, 5): 950,
        (23, 6): 1034,
        (23, 7): 1773,
        (23, 8): 5130,
        (23, 9): 4340,
        (23, 10): 3926,
        (23, 11): 3767,
        (23, 12): 4093,
        (23, 13): 4602,
        (23, 14): 4904,
        (23, 15): 5319,
        (23, 16): 6002,
        (23, 17): 6654,
        (23, 18): 7361,
        (23, 19): 8588,
        (23, 20): 9886,
        (23, 21): 2413,
        (23, 22): 1514,
        (23, 24): 2331,
        (23, 25): 3052,
        (23, 26): 4018,
        (23, 27): 6736,
        (23, 28): 4875,
        (23, 29): 2460,
        (23, 30): 1437,
        (23, 31): 6989,
        (23, 32): 5695,
        (23, 33): 4907,
        (23, 34): 4438,
        (24, 0): 5577,
        (24, 1): 5049,
        (24, 2): 4291,
        (24, 3): 3762,
        (24, 4): 3652,
        (24, 5): 2415,
        (24, 6): 1329,
        (24, 7): 1665,
        (24, 8): 6136,
        (24, 9): 4855,
        (24, 10): 4186,
        (24, 11): 3610,
        (24, 12): 3170,
        (24, 13): 3084,
        (24, 14): 3132,
        (24, 15): 3184,
        (24, 16): 3705,
        (24, 17): 4322,
        (24, 18): 5042,
        (24, 19): 6261,
        (24, 20): 7558,
        (24, 21): 4710,
        (24, 22): 3830,
        (24, 23): 2331,
        (24, 25): 741,
        (24, 26): 1735,
        (24, 27): 4595,
        (24, 28): 4645,
        (24, 29): 2438,
        (24, 30): 1803,
        (24, 31): 4939,
        (24, 32): 3680,
        (24, 33): 2674,
        (24, 34): 2116,
        (25, 0): 6151,
        (25, 1): 5648,
        (25, 2): 4936,
        (25, 3): 4453,
        (25, 4): 4340,
        (25, 5): 3152,
        (25, 6): 2067,
        (25, 7): 2092,
        (25, 8): 6731,
        (25, 9): 5381,
        (25, 10): 4682,
        (25, 11): 4034,
        (25, 12): 3385,
        (25, 13): 3041,
        (25, 14): 2941,
        (25, 15): 2728,
        (25, 16): 3071,
        (25, 17): 3617,
        (25, 18): 4309,
        (25, 19): 5535,
        (25, 20): 6834,
        (25, 21): 5445,
        (25, 22): 4559,
        (25, 23): 3052,
        (25, 24): 741,
        (25, 26): 995,
        (25, 27): 4094,
        (25, 28): 4995,
        (25, 29): 2997,
        (25, 30): 2505,
        (25, 31): 4495,
        (25, 32): 3297,
        (25, 33): 2141,
        (25, 34): 1464,
        (26, 0): 7010,
        (26, 1): 6534,
        (26, 2): 5865,
        (26, 3): 5420,
        (26, 4): 5304,
        (26, 5): 4147,
        (26, 6): 3054,
        (26, 7): 2831,
        (26, 8): 7608,
        (26, 9): 6200,
        (26, 10): 5480,
        (26, 11): 4777,
        (26, 12): 3944,
        (26, 13): 3331,
        (26, 14): 3045,
        (26, 15): 2433,
        (26, 16): 2383,
        (26, 17): 2740,
        (26, 18): 3354,
        (26, 19): 4596,
        (26, 20): 5894,
        (26, 21): 6422,
        (26, 22): 5530,
        (26, 23): 4018,
        (26, 24): 1735,
        (26, 25): 995,
        (26, 27): 3627,
        (26, 28): 5642,
        (26, 29): 3879,
        (26, 30): 3485,
        (26, 31): 4114,
        (26, 32): 3080,
        (26, 33): 1772,
        (26, 34): 936,
        (27, 0): 7488,
        (27, 1): 7258,
        (27, 2): 7006,
        (27, 3): 6969,
        (27, 4): 6850,
        (27, 5): 6384,
        (27, 6): 5715,
        (27, 7): 6180,
        (27, 8): 8123,
        (27, 9): 6576,
        (27, 10): 5896,
        (27, 11): 5121,
        (27, 12): 3886,
        (27, 13): 2762,
        (27, 14): 2170,
        (27, 15): 1421,
        (27, 16): 1446,
        (27, 17): 2139,
        (27, 18): 2980,
        (27, 19): 3439,
        (27, 20): 4396,
        (27, 21): 8862,
        (27, 22): 8088,
        (27, 23): 6736,
        (27, 24): 4595,
        (27, 25): 4094,
        (27, 26): 3627,
        (27, 28): 5308,
        (27, 29): 5181,
        (27, 30): 5563,
        (27, 31): 590,
        (27, 32): 1156,
        (27, 33): 1952,
        (27, 34): 2721,
        (28, 0): 2327,
        (28, 1): 2330,
        (28, 2): 2628,
        (28, 3): 3158,
        (28, 4): 3095,
        (28, 5): 3955,
        (28, 6): 4444,
        (28, 7): 5868,
        (28, 8): 2923,
        (28, 9): 1504,
        (28, 10): 1176,
        (28, 11): 1122,
        (28, 12): 1731,
        (28, 13): 2725,
        (28, 14): 3327,
        (28, 15): 4518,
        (28, 16): 5737,
        (28, 17): 6754,
        (28, 18): 7728,
        (28, 19): 8577,
        (28, 20): 9666,
        (28, 21): 5655,
        (28, 22): 5329,
        (28, 23): 4875,
        (28, 24): 4645,
        (28, 25): 4995,
        (28, 26): 5642,
        (28, 27): 5308,
        (28, 29): 2479,
        (28, 30): 3555,
        (28, 31): 5109,
        (28, 32): 4261,
        (28, 33): 4758,
        (28, 34): 5135,
        (29, 0): 3154,
        (29, 1): 2656,
        (29, 2): 2026,
        (29, 3): 1798,
        (29, 4): 1677,
        (29, 5): 1622,
        (29, 6): 1969,
        (29, 7): 3417,
        (29, 8): 3735,
        (29, 9): 2417,
        (29, 10): 1771,
        (29, 11): 1356,
        (29, 12): 1736,
        (29, 13): 2558,
        (29, 14): 3051,
        (29, 15): 3903,
        (29, 16): 4945,
        (29, 17): 5848,
        (29, 18): 6746,
        (29, 19): 7832,
        (29, 20): 9071,
        (29, 21): 3869,
        (29, 22): 3270,
        (29, 23): 2460,
        (29, 24): 2438,
        (29, 25): 2997,
        (29, 26): 3879,
        (29, 27): 5181,
        (29, 28): 2479,
        (29, 30): 1078,
        (29, 31): 5261,
        (29, 32): 4030,
        (29, 33): 3777,
        (29, 34): 3741,
        (30, 0): 3917,
        (30, 1): 3350,
        (30, 2): 2528,
        (30, 3): 1959,
        (30, 4): 1850,
        (30, 5): 820,
        (30, 6): 926,
        (30, 7): 2397,
        (30, 8): 4431,
        (30, 9): 3314,
        (30, 10): 2756,
        (30, 11): 2432,
        (30, 12): 2656,
        (30, 13): 3222,
        (30, 14): 3587,
        (30, 15): 4181,
        (30, 16): 5045,
        (30, 17): 5835,
        (30, 18): 6654,
        (30, 19): 7821,
        (30, 20): 9100,
        (30, 21): 3299,
        (30, 22): 2542,
        (30, 23): 1437,
        (30, 24): 1803,
        (30, 25): 2505,
        (30, 26): 3485,
        (30, 27): 5563,
        (30, 28): 3555,
        (30, 29): 1078,
        (30, 31): 5748,
        (30, 32): 4462,
        (30, 33): 3885,
        (30, 34): 3613,
        (31, 0): 7354,
        (31, 1): 7170,
        (31, 2): 6992,
        (31, 3): 7023,
        (31, 4): 6906,
        (31, 5): 6566,
        (31, 6): 5985,
        (31, 7): 6562,
        (31, 8): 7982,
        (31, 9): 6451,
        (31, 10): 5800,
        (31, 11): 5047,
        (31, 12): 3826,
        (31, 13): 2743,
        (31, 14): 2210,
        (31, 15): 1768,
        (31, 16): 2025,
        (31, 17): 2719,
        (31, 18): 3530,
        (31, 19): 3884,
        (31, 20): 4742,
        (31, 21): 9030,
        (31, 22): 8289,
        (31, 23): 6989,
        (31, 24): 4939,
        (31, 25): 4495,
        (31, 26): 4114,
        (31, 27): 590,
        (31, 28): 5109,
        (31, 29): 5261,
        (31, 30): 5748,
        (31, 32): 1294,
        (31, 33): 2378,
        (31, 34): 3188,
        (32, 0): 6377,
        (32, 1): 6125,
        (32, 2): 5852,
        (32, 3): 5815,
        (32, 4): 5696,
        (32, 5): 5281,
        (32, 6): 4693,
        (32, 7): 5325,
        (32, 8): 7015,
        (32, 9): 5465,
        (32, 10): 4771,
        (32, 11): 3988,
        (32, 12): 2754,
        (32, 13): 1624,
        (32, 14): 1019,
        (32, 15): 659,
        (32, 16): 1645,
        (32, 17): 2637,
        (32, 18): 3599,
        (32, 19): 4328,
        (32, 20): 5406,
        (32, 21): 7752,
        (32, 22): 7000,
        (32, 23): 5695,
        (32, 24): 3680,
        (32, 25): 3297,
        (32, 26): 3080,
        (32, 27): 1156,
        (32, 28): 4261,
        (32, 29): 4030,
        (32, 30): 4462,
        (32, 31): 1294,
        (32, 33): 1317,
        (32, 34): 2149,
        (33, 0): 6591,
        (33, 1): 6230,
        (33, 2): 5771,
        (33, 3): 5555,
        (33, 4): 5432,
        (33, 5): 4689,
        (33, 6): 3873,
        (33, 7): 4230,
        (33, 8): 7226,
        (33, 9): 5698,
        (33, 10): 4964,
        (33, 11): 4178,
        (33, 12): 3050,
        (33, 13): 2075,
        (33, 14): 1571,
        (33, 15): 661,
        (33, 16): 1173,
        (33, 17): 2092,
        (33, 18): 3034,
        (33, 19): 4060,
        (33, 20): 5294,
        (33, 21): 7155,
        (33, 22): 6331,
        (33, 23): 4907,
        (33, 24): 2674,
        (33, 25): 2141,
        (33, 26): 1772,
        (33, 27): 1952,
        (33, 28): 4758,
        (33, 29): 3777,
        (33, 30): 3885,
        (33, 31): 2378,
        (33, 32): 1317,
        (33, 34): 836,
        (34, 0): 6752,
        (34, 1): 6333,
        (34, 2): 5767,
        (34, 3): 5439,
        (34, 4): 5318,
        (34, 5): 4371,
        (34, 6): 3414,
        (34, 7): 3540,
        (34, 8): 7374,
        (34, 9): 5892,
        (34, 10): 5157,
        (34, 11): 4401,
        (34, 12): 3404,
        (34, 13): 2607,
        (34, 14): 2223,
        (34, 15): 1498,
        (34, 16): 1606,
        (34, 17): 2234,
        (34, 18): 3044,
        (34, 19): 4211,
        (34, 20): 5496,
        (34, 21): 6779,
        (34, 22): 5918,
        (34, 23): 4438,
        (34, 24): 2116,
        (34, 25): 1464,
        (34, 26): 936,
        (34, 27): 2721,
        (34, 28): 5135,
        (34, 29): 3741,
        (34, 30): 3613,
        (34, 31): 3188,
        (34, 32): 2149,
        (34, 33): 836,
    }

    for station_id, name in stations.items():
        metro.add_station(station_id, name)

    metro.add_connection(0, 1, "L1", 1.227)
    metro.add_connection(1, 2, "L1", 2.379)
    metro.add_connection(2, 3, "L1", 1.935)
    metro.add_connection(3, 4, "L1", 1.503)
    metro.add_connection(4, 5, "L1", 2.919)
    metro.add_connection(5, 6, "L1", 3.474)
    metro.add_connection(6, 7, "L1", 3.786)

    metro.add_connection(8, 0, "L3", 1.977)
    metro.add_connection(0, 9, "L3", 1.995)
    metro.add_connection(9, 10, "L3", 1.677)
    metro.add_connection(10, 11, "L3", 1.959)
    metro.add_connection(11, 12, "L3", 3.357)
    metro.add_connection(12, 13, "L3", 2.85)
    metro.add_connection(13, 14, "L3", 2.145)
    metro.add_connection(14, 15, "L3", 2.382)
    metro.add_connection(15, 16, "L3", 3.459)
    metro.add_connection(16, 17, "L3", 2.724)
    metro.add_connection(17, 18, "L3", 2.472)
    metro.add_connection(18, 19, "L3", 3.885)
    metro.add_connection(19, 20, "L3", 3.918)

    metro.add_connection(21, 22, "L7", 2.436)
    metro.add_connection(22, 23, "L7", 4.29)
    metro.add_connection(23, 6, "L7", 3.015)
    metro.add_connection(6, 24, "L7", 3.252)
    metro.add_connection(24, 25, "L7", 1.818)
    metro.add_connection(25, 26, "L7", 2.364)
    metro.add_connection(26, 27, "L7", 4.428)

    metro.add_connection(28, 11, "L9", 3.177)
    metro.add_connection(11, 29, "L9", 3.456)
    metro.add_connection(29, 30, "L9", 2.865)
    metro.add_connection(30, 6, "L9", 3.399)

    metro.add_connection(31, 32, "L12", 3.84)
    metro.add_connection(32, 15, "L12", 1.689)
    metro.add_connection(15, 33, "L12", 1.35)
    metro.add_connection(33, 34, "L12", 2.175)
    metro.add_connection(34, 26, "L12", 1.953)


    return metro


def find_metro_route(
    start_station: int, end_station: int
) -> Tuple[List[int], float, List[str]]:
    metro = create_sample_metro_system()
    return metro.find_route(start_station, end_station)


if __name__ == "__main__":
    
    if len(sys.argv)==3:
        path, total_time, lines = find_metro_route(int(sys.argv[1]), int(sys.argv[2]))
        print(*path,sep=',')
        print(f"{total_time}")
        
